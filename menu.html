<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Menu</title>
    <link rel="stylesheet" href="menu.css" />
</head>

<body>
    <div id="menuContainer"></div>

    <script>
        (async () => {
            if (!window.menuAPI) {
                console.error('menuAPI is not available!');
                return;
            }

            const engines = await window.menuAPI.requestEngines();
            const container = document.getElementById('menuContainer');

            engines.forEach((e, i) => {
                const div = document.createElement('div');
                div.className = 'menu-item';
                div.innerHTML = `<img src="${e.icon}" alt="${e.label}"><span>${e.label}</span>`;
                div.onclick = () => window.menuAPI.selectEngine(i);
                container.appendChild(div);
            });

            // Wait a tick for all items (including images) to render
            requestAnimationFrame(() => {
                const padding = 20; // extra spacing if needed
                const height = container.scrollHeight + padding;
                const width = container.scrollWidth + 16; // keep your width padding
                window.menuAPI.setMenuDimensions({ height, width });
            });
        })();
    </script>


</body>

</html>